# Starting GCP

Google Cloud Platcform(GCP)를 사용해 두개 이상의 머신을 가진 클러스터를 만들자!

[https://console.cloud.google.com](https://console.cloud.google.com) 에 접속하고 이전 사용 이력이 없는 구글 계정으로 로그인을 합시다~

첫 사용시에는 VISA/Master 카드 등록이 필요한 것으로 알고있는데, 자동으로 결제가 연장되지는 않으니 안심하고 등록하셔도 괜찮습니다 😄

GCP는 기본적으로 동시에 여러 프로젝트를 진행 할 수 있게 되어있고, 기본적으로 `My First Project`가 있을 것!

좌측의 메뉴를 내려 `Compute Engine`과 `VPC 네트워크` 두 메뉴를 고정해두자 (자주 쓰이니까~)

### Virtual Machine 만들기

이 책에서 주어진 권장 사양의 머신은 스펙이 서문에 제공되어있습니다. 이를 참조해서 우리가 사용할 컴퓨터를 제공받도록 합니다.

Compute Engine > VM Instance 메뉴로 접속하면 상단에 `인스턴스 만들기` 버튼이 있습니다. 

`인스턴스 이름` Master와 Worker 각각 구분 가능하게 하시면 됩니다~

`리전` `영역` 기왕이면 asia-northeast3 로 하시는게 낫지 않을까요?(잘모름)

`머신 구성` 권장 스펙에 맞춰 `e2-standard-4`로 했습니다.er

`부팅 디스크` Ubuntu 20.04 LTS와 50GB의 메모리로 설치했습니다.

`방화벽`의 HTTP/HTTPS 트래픽 모두 허용했습니다.

그리고 만드시면 잠시 후 구글 서버에 내 컴퓨터가 생깁니다~ 야호~

똑같은 방식으로 Master와 Worker Node 용, 두 대의 VM을 구성하시면 됩니다.

### 방화벽 설정

쿠버네티스 사용을 위해 포트도 열고 고정IP도 받는 과정입니다.

VPC  네트워크 > 외부 IP 주소 메뉴로 접속하시면 상단에 `고정 주소 예약` 메뉴가 보입니다.

두 인스턴스 모두에 대해서 **고정 IP** 주소를 할당받읍시다. (예약 이라고 써있었던 것 같은데..)

VPC 네트워크 >방화벽 메뉴로 접속하시고 `방화벽 규칙 만들기` 메뉴로 들어가봅니다.

방화벽 규칙의 `이름`을 설정하고 (어떻게 해도 상관없습니다. 저는 K8S라고 한듯?) 

`대상` 은 **네트워크의 모든 인스턴스**

`소스 IP 범위` 는 0.0.0.0/0

`프로토콜 및 필터` 는 교재 60-61 page에 보이는 포트 범위를 `tcp` 칸에 컴마(,)로 구분해 적어주시면 됩니다. 

이렇게 되면 GCP에 두개의 Instance를 만드는데 까지 성공했습니다. :smile: 이제부터는 책에 나온대로 따라가면 완성~

### 주의사항

[console.cloud.google.com](http://console.cloud.google.com) 의 상단에 보이다시피, 우리는 90일간의 평가판을 300$의 주어진 크레딧 안에서 사용하려합니다! 제공받은 VM의 computing power가 강력하지 않고 부하가 많이 걸리는 작업을 하지 않을 예정이라(사실 잘 모릅니다) 크레딧이 90일 전에 다 닳아버릴 걱정은 안해도 될 듯 하지만! 안쓸때는 instance를 꺼두는 것이 크레딧을 아끼는데 도움이 될 수 있습니다. ㅎㅎ

Compute Engine > VM Instance 탭을 보면 각 instance를 시작/중지 할 수 있는 버튼이 존재합니다. 실습하지 않을때는 꺼두는 것도 나쁘지 않을 것같아요~